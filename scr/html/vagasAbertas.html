<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../Assets/Logo fundo branco.png" type="image/x-icon">
    <title>Vagas Abertas - Optimiza</title>
    <link rel="stylesheet" href="../css/vagasAbertas.css">
    <link rel="stylesheet" href="../css/menu.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body>

    <!-- Menu -->
    <div class="header">
        <div class="container">
            <div class="header-left">
                <img src="../Assets/Logo fundo branco.png" alt="Optimiza" class="register-logo">
                <div class="optimiza-inicial">
                    Optimiza
                </div>
            </div>
            <div class="header-center">
                <div class="menu-text">
                    <a href="home.html">Home</a>
                </div>
                <div class="menu-container">
                    <button class="menu-btn menu-text pag">Vagas</button>
                    <div class="dropdown-content">
                        <a href="aberturaVaga.html">Abrir Vaga</a>
                        <a href="vagasAbertas.html">Vagas Abertas</a>
                    </div>
                </div>
                <div class="menu-text">
                    <a href="bancoDeTalentos.html">Banco de Talentos</a>
                </div>
                <div class="menu-text">
                    <a href="painel.html">Analítico</a>
                </div>
                <div class="menu-text">
                    <a href="/chamado/">Ajuda</a>
                </div>
            </div>
            <div class="header-right">
                <img src="../Assets/profile.png" class="icon-profile" alt="">
                <div class="menu-profile" id="profile-name">
                    Perfil
                </div>
                <button id="btn-logout" class="logout-btn">Sair</button>
            </div>
        </div>
    </div>

    <!-- Conteúdo principal Listagem de vagas abertas -->
    <div class="talentos-container">
        <h2 class="talentos-title">Vagas Abertas</h2>
        <div class="talentos-actions">
            <input type="text" placeholder="Buscar por título" class="talentos-search" id="filtro-titulo">
            <div class="filtro-dropdown-container" style="display:inline-block; position:relative;">
                <button class="talentos-btn talentos-btn-filter" id="btn-dropdown">Filtros ▼</button>
                <div class="filtro-dropdown" id="dropdown-filtros"
                    style="display:none; position:absolute; left:0; top:110%; background:#fff; border:1px solid #ccc; border-radius:0.5rem; padding:1rem; z-index:10; min-width:220px; box-shadow:0 4px 12px rgba(0,0,0,0.08);">
                    <select id="select-filtro" class="filtro-select" style="width:100%; margin-bottom:0.7rem;">
                        <option value="cargo">Cargo</option>
                        <option value="nivelFormacao">Nível de Formação</option>
                        <option value="idiomas">Idiomas</option>
                    </select>
                    <input type="text" id="input-filtro" class="filtro-input" placeholder="Digite o valor"
                        style="width:100%; margin-bottom:0.7rem;">
                    <button id="btn-aplicar-filtro" class="talentos-btn talentos-btn-search"
                        style="width:100%;">Aplicar</button>
                </div>
                <span id="indicadores-filtros" style="margin-left:1rem;"></span>
            </div>
        </div>
        <div class="description-table-jobs">
            <table class="table-description">
                <thead>
                    <tr>
                        <th class="description-names"><strong>Título da Vaga</strong></th>
                        <th class="description-names"><strong>Cargo</strong></th>
                        <th class="description-names"><strong>Nível de Formação</strong></th>
                        <th class="description-names"><strong>Idiomas</strong></th>
                    </tr>
                </thead>
            </table>
        </div>

        <div class="talentos-list-scroll">
            <table class="talentos-table">
                <tbody id="talentos-list">
                </tbody>
            </table>
        </div>

        <!-- Modal para detalhes do candidato -->
        <div id="modal-candidato" class="modal-candidato" style="display:none;">
            <div class="modal-content">
                <span class="modal-close" id="modal-close">&times;</span>
                <h3 id="modal-nome"></h3>
                <p><strong>Nível de Formação:</strong> <span id="modal-nivel"></span></p>
                <p><strong>Curso:</strong> <span id="modal-curso"></span></p>
                <p><strong>Status:</strong> <span id="modal-status"></span></p>
            </div>
        </div>

        <!-- Modal de Detalhes da Vaga -->
        <div id="modal-vaga" class="modal-overlay">
            <div class="modal-content">
                <span class="close-btn" id="close-modal">&times;</span>
                <h2 class="modal-title">Vaga <span id="modal-titulo"></span></h2>

                <div class="vaga-status">
                    <div class="vaga-etapa">
                        <div class="bolinha"></div>
                        <p>Aguardando Aprovação RH</p>
                    </div>
                    <div class="linha"></div>
                    <div class="vaga-etapa ativa">
                        <div class="bolinha"></div>
                        <p>Entrevistando Candidatos</p>
                    </div>
                    <div class="linha"></div>
                    <div class="vaga-etapa">
                        <div class="bolinha"></div>
                        <p>Admissão Concluída</p>
                    </div>
                </div>

                <!-- Main info: duas colunas estilo "detalhes" (não inputs) -->
                <section class="modal-details">
                    <div class="details-left">
                        <div class="detail-row">
                            <div class="detail-label">Título</div>
                            <div class="detail-value" id="titulo-vaga-display"></div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-label">Cargo</div>
                            <div class="detail-value" id="cargo-vaga-display"></div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-label">Experiência</div>
                            <div class="detail-value" id="experiencia-vaga-display"></div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-label">Área de Formação</div>
                            <div class="detail-value" id="area-vaga-display"></div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-label">Nível de Formação</div>
                            <div class="detail-value" id="nivel-vaga-display"></div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-label">Idiomas</div>
                            <div class="detail-value" id="idiomas-vaga-display"></div>
                        </div>
                        <!-- Novo campo para Status -->
                        <div class="detail-row">
                            <div class="detail-label">Status</div>
                            <div class="detail-value" id="modal-status-display"></div>
                        </div>
                    </div>

                    <div class="details-right">
                        <div class="detail-block">
                            <div class="detail-label right">Palavras-Chave</div>
                            <div class="keywords-box" id="palavras-vaga-display"></div>
                        </div>
                    </div>
                </section>


                <!-- Buttons: alinhamento central com espaçamento -->
                <footer class="modal-actions">
                    <button class="btn action ver-candidatos">Ver Candidatos</button>
                    <button class="btn action editar">Editar Vaga</button>
                    <!-- botão de ação que muda conforme status: Aprovar Vaga ou Concluir Vaga -->
                    <button id="btn-acao-vaga" class="btn action aprovar">Aprovar Vaga</button>
                    <button class="btn action apagar vermelho">Encerrar Vaga</button>
                </footer>
            </div>
        </div>

    </div>
    </div>
    <script>
        // Exibe o nome do usuário salvo no localStorage ao lado da foto de perfil
        window.addEventListener('DOMContentLoaded', function () {
            var nomeUsuario = localStorage.getItem('nomeUsuario');
            if (nomeUsuario) {
                document.getElementById('profile-name').textContent = nomeUsuario;
            }
        });
    </script>
</body>

</html>

<script src="../js/vagasAbertas.js"></script>
<script src="../js/sessoes.js"></script>